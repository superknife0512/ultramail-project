(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gift-group"],{"4a06":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gift",class:{"full-grid":!t.isLogin}},[i("div",{staticClass:"edit-prev"},[t.isMount?i("v-loader"):t._e(),t.isMount?t._e():i("div",{staticClass:"edit-prev__body z-depth-3"},[i("div",{staticClass:"edit-prev__name",style:t.bgColor},[i("h5",[t._v(t._s(t.userGift.name))])]),i("img",{staticClass:"edit-prev__img",attrs:{src:t.imgLink,alt:"cax"}}),i("div",{staticClass:"edit-prev__info"},[i("p",{staticClass:"edit-prev__desc"},[t._v("\n                    "+t._s(t.userGift.desc)+"\n                ")]),i("div",{staticClass:"edit-prev__unlock",style:t.unlockColor},[i("h6",{style:{color:t.color.hex}},[t._v("Để nhận được tài liệu, bạn vui lòng điền đầy đủ thông tin bên dưới")]),t.isUnlock?t._e():i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s6"},[i("label",{attrs:{for:"token"}},[t._v("Mã nhận quà")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],attrs:{type:"text",name:"token"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}})]),i("div",{staticClass:"input-field col s6"},[i("label",{attrs:{for:"token"}},[t._v("Tên của bạn")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.studentName,expression:"studentName"}],attrs:{type:"text",name:"token"},domProps:{value:t.studentName},on:{input:function(e){e.target.composing||(t.studentName=e.target.value)}}})])]),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("label",{attrs:{for:"name"}},[t._v("Nhập vào email của bạn")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),i("div",{staticClass:"row"},[i("div",{staticClass:"input-field col s12"},[i("label",{attrs:{for:"phoen"}},[t._v("Nhập vào số điện thoại của bạn")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"number",name:"phone"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])]),i("div",{staticClass:"edit-prev__lock"},[i("button",{staticClass:"btn waves-effect light-effect",style:t.bgColor,attrs:{disabled:!t.email||!t.token||!t.isEmail},on:{click:t.unlock}},[i("i",{staticClass:"material-icons left"},[t._v("lock_open")]),t._v("\n                                Mở khóa tài liệu\n                            ")])])]),t.isUnlock?i("p",[t._v("Cảm ơn bạn đã đăng kí nhận ebook, chúng tôi đã gửi một món quà đến địa \n                        chỉ email: "),i("b",[t._v(t._s(t.email))]),t._v(". Bạn hãy kiểm tra hộp thư của mình nhé, có thể \n                        nó cũng sẽ ở trong spam nếu bạn không tìm thấy.\n                    ")]):t._e()])])])],1)])},s=[],o=(i("7f7f"),i("f499")),a=i.n(o),r={props:["userId"],data:function(){return{userGift:"",token:"",email:"",isMount:!0,isUnlock:!1,studentName:"",phone:""}},created:function(){this.initialize()},methods:{unlock:function(){var t=this;this.token===this.userGift.token&&(this.isUnlock=!0,fetch("http://localhost:4000/userDash/send-gift",{method:"POST",headers:{"Content-Type":"application/json"},body:a()({email:this.email,name:this.userGift.name,desc:this.userGift.desc,downloadLink:this.userGift.downloadLink,userId:this.userId,studentName:this.studentName,phone:this.phone})}).then(function(t){return t.json()}).catch(function(e){throw t.firePopup("error","Lỗi không gửi được email","Lỗi xãy ra từ server"),e}))},initialize:function(){var t=this;fetch("".concat("http://localhost:4000","/userDash/gift/").concat(this.userId),{method:"GET"}).then(function(t){return t.json()}).then(function(e){if(t.isMount=!1,"fail"===e.status)return t.firePopup("error","Phát hiện lỗi",e.msg);t.userGift=e.user.gift,t.$store.commit("createUserData",e.user)}).catch(function(e){throw t.firePopup("error","Phát hiện lỗi",e.err.msg),t.isMount=!1,e})}},computed:{imgLink:function(){return!!this.userGift&&(this.userGift.imgUrl?this.userGift.imgUrl:"".concat("http://localhost:4000","/public/images/gift.jpg"))},color:function(){return!!this.userGift&&JSON.parse(this.userGift.color)},bgColor:function(){return"backgroundColor : ".concat(this.color.hex)},unlockColor:function(){if(this.color){var t=this.color.rgba;return"backgroundColor : rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", .13)")}return!1},isEmail:function(){var t=/^[a-z][a-z0-9_.]{5,32}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/;return!!t.test(this.email.toLowerCase())},isLogin:function(){return this.$store.state.isLogin}}},l=r,c=(i("6f3c1"),i("2877")),u=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=u.exports},"6f3c1":function(t,e,i){"use strict";var n=i("ed77"),s=i.n(n);s.a},ed77:function(t,e,i){}}]);
//# sourceMappingURL=gift-group.f6e41ce7.js.map