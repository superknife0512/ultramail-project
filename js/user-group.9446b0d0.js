(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-group"],{"02f4":function(t,e,a){var n=a("4588"),i=a("be13");t.exports=function(t){return function(e,a){var s,r,c=String(i(e)),o=n(a),l=c.length;return o<0||o>=l?t?"":void 0:(s=c.charCodeAt(o),s<55296||s>56319||o+1===l||(r=c.charCodeAt(o+1))<56320||r>57343?t?c.charAt(o):s:t?c.slice(o,o+2):r-56320+(s-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var n=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},"0bfb":function(t,e,a){"use strict";var n=a("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0ef1":function(t,e,a){},"1a0f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("div",{staticClass:"overview"},[a("div",{staticClass:"overview__wel"},[a("h6",[t._v("Xin chào "+t._s(t.userData.name)+" đã quay trở lại")]),a("i",{staticClass:"material-icons overview__name",class:{"pink-text":t.isNearExpire}},[t._v("                    \n                "+t._s(t.isNearExpire?"info":"check_circle")+"\n            ")])]),a("div",[a("button",{staticClass:"btn waves-effect black-text light-effect amber overview__pass",on:{click:function(e){t.passChangePopup=!0}}},[a("i",{staticClass:"material-icons left black-text"},[t._v("lock_open")]),t._v("\n                Đổi mật khẩu\n            ")])])]),a("div",{staticClass:"section-1"},[a("div",{staticClass:"static-1st z-depth-1"},[t.userData.name?t._e():a("v-loader"),t.userData.name?a("div",{staticClass:"static-1st__chart--body"},[a("pie-chart",{staticClass:"static-1st__chart"})],1):t._e(),t.userData.name?a("div",{staticClass:"static-1st__chart-info"},[a("p",[t._v("Biểu đồ thể hiện số lượt click trên email chỉ cho bạn biết bằng\n                    tỉ lệ mà người nhận click vào thư của bạn trên tổng số email mà bạn \n                    đã gửi đi. Từ đó đưa ra các nhận định phù hợp với chiến dịch\n                    marketing mình đề ra.\n                ")]),a("h6",[t._v("Lượt click mail: "),a("b",{staticClass:"static-1st__chart-click"},[t._v(t._s(t.userData.clicks))])]),a("h6",[t._v("Lượt gửi mail: "),a("b",{staticClass:"static-1st__chart-send"},[t._v(t._s(t.userData.emailSends))])])]):t._e()],1),a("div",{staticClass:"account z-depth-1"},[a("h5",{staticClass:"account__title"},[t._v("Thông tin tài khoản ")]),t.userData.name?t._e():a("v-loader"),t.userData.name?a("div",{staticClass:"account__detail"},[a("h6",{staticClass:"account__budget"},[t._v("\n                    Tổng tiền đã dùng: "),a("b",[t._v(t._s(t._f("priceFilter")(t.userData.budget)))]),t._v(" VND\n                ")]),a("h6",{staticClass:"account__date"},[t._v("\n                    Thời gian sử dụng đến ngày: "),a("b",[t._v(t._s(t._f("dateFilter")(t.userData.expirationDate)))])]),a("h6",{staticClass:"account__remain"},[t._v("\n                    Thời gian còn lại: "),a("b",[t._v(t._s(t.remainingDate)+" ngày")])])]):t._e(),t.userData.name?a("div",{staticClass:"account__update"},[a("h6",[t._v("Nâng cấp tài khoản:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:"Mã kích hoạt"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),a("submit-btn",{staticClass:"submitBtn",attrs:{isLoading:t.isActivating,disableCon:!t.code},on:{onSubmit:t.activateLicense}},[t._v("\n                    Nâng cấp tài khoản\n                ")])],1):t._e(),t.userData.name?a("span",{staticClass:"account__badge z-depth-2",style:t.userLevelColor},[a("b",[t._v(t._s(t.userData.userLevel))]),t._v(" \n                "+t._s(t.transUserLevel)+"\n            ")]):t._e()],1)]),a("div",{staticClass:"static-2nd z-depth-1"},[t.dataSet._id?t._e():a("v-loader"),t.dataSet._id?a("div",{staticClass:"static-2nd__chart"},[a("line-chart",{attrs:{datasets:t.dataSet}})],1):t._e(),t.userData._id?a("div",{staticClass:"static-2nd__info"},[a("p",[t._v("\n                Là số lượt mà các bạn chia sẻ trang quà tặng của mình\n                cho mọi người đăng kí và tải về ebook, số lượt tải được thu \n                thập theo từng ngày, dựa vào đó bạn có thể điều chỉnh phù hợp\n            ")]),a("h6",[t._v("\n                Trung bình có: "),a("b",[t._v(t._s(t.average))]),t._v("  lượt tải\n            ")])]):t._e()],1),0===t.remainingDate?a("expiration-msg",[t._v("\n        Thời hạn sử dụng của tài khoản này đã hết, hãy nhanh chóng liên hệ\n        với chúng tôi để gia hạn tài khoản!\n    ")]):t._e(),a("password-change",{attrs:{popupActive:t.passChangePopup},on:{closePassChange:function(e){t.passChangePopup=!1}}})],1)},i=[],s=a("f499"),r=a.n(s),c=(a("6b54"),a("28a5"),a("0a0d")),o=a.n(c),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.popupActive?a("div",{staticClass:"up-popup passChange"},[a("float-down",[t.activeBody?a("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.away,expression:"away"}],staticClass:"up-popup__body z-depth-3"},[a("h5",{staticClass:"up-popup__title light-blue-text text-darken-3"},[t._v("\n                    Đổi mật khẩu\n                ")]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"pass"}},[t._v("Mật khẩu hiện tại")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"validate",attrs:{type:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})]),a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"newpass"}},[t._v("Mật khẩu mới")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newpass,expression:"newpass"}],staticClass:"validate",attrs:{type:"password"},domProps:{value:t.newpass},on:{input:function(e){e.target.composing||(t.newpass=e.target.value)}}}),a("warning-msg",{attrs:{appear:!t.isLength&&t.newpass.length>0,errorCon:t.isLength}},[t._v("\n                        Mật khẩu nên có từ 7 kí tự trở lên\n                    ")])],1),a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"pass"}},[t._v("Nhập lại mật khẩu")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cfNewpass,expression:"cfNewpass"}],staticClass:"validate",attrs:{type:"password"},domProps:{value:t.cfNewpass},on:{input:function(e){e.target.composing||(t.cfNewpass=e.target.value)}}}),a("warning-msg",{attrs:{appear:!t.isSame,errorCon:t.isSame}},[t._v("\n                        Nhập lại mật khẩu phải giống nhau\n                    ")])],1)]),a("submit-btn",{attrs:{isLoading:t.isLoading,disableCon:!t.pass||!t.newpass||!t.isLength||!t.isSame},on:{onSubmit:t.submit}},[t._v("\n                    Đổi mật khẩu\n                ")]),a("i",{staticClass:"material-icons close-icon red-text",on:{click:t.away}},[t._v("clear")])],1):t._e()])],1):t._e()},u=[],p=a("c7db"),d={props:["popupActive"],data:function(){return{isLoading:!1,pass:"",newpass:"",cfNewpass:"",activeBody:!0}},methods:{submit:function(){var t=this;this.isLoading=!0,fetch("".concat("http://104.248.159.101:4000","/user/update-password"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.state.token},body:r()({password:this.pass,newpass:this.newpass})}).then(function(t){return t.json()}).then(function(e){t.isLoading=!1,"fail"===e.status?t.firePopup("error","Đổi mật khẩu thất bại",e.msg):t.firePopup("success","Đổi mật khẩu thành công","Bạn có thể trở lại trang đăng nhập để đăng nhập lại")}).catch(function(e){throw t.firePopup("error","Có lỗi từ server","Lỗi không xác định"),e})},away:function(){var t=this;this.activeBody=!1,setTimeout(function(){t.$emit("closePassChange"),t.activeBody=!0},1e3)}},computed:{isLength:function(){return this.newpass.length>6},isSame:function(){return this.newpass===this.cfNewpass}},mixins:[p["mixin"]]},h=d,v=(a("5310"),a("2877")),f=Object(v["a"])(h,l,u,!1,null,null,null),g=f.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:"myChart",width:"400",height:"400"}})},b=[],_={data:function(){return{myChart:""}},mounted:function(){var t=this.$Chart,e=document.getElementById("myChart").getContext("2d");this.chart=new t(e,{type:"doughnut",data:{labels:["Clicks","Dont Clicks"],datasets:[{label:"Tỉ lệ click trên tỉ lệ bỏ qua",backgroundColor:["#51d7e9","#7751b3"],borderColor:"white",borderWidth:"7",data:[this.clickPercent,this.noneClickPer]}]},options:{title:{display:!0,text:"% clicks trên lượt email gửi đi",fontSize:18}}})},computed:{userData:function(){return this.$store.state.userData},clickPercent:function(){var t=this.userData.clicks,e=this.userData.emailSends;e||(e=1);var a=Math.ceil(t/e*100);return a},noneClickPer:function(){return 100-this.clickPercent}}},C=_,k=(a("d66d"),Object(v["a"])(C,m,b,!1,null,null,null)),x=k.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:"CaxChart",height:"320",width:"600"}})},y=[],D={props:["datasets"],data:function(){return{Chart:""}},mounted:function(){var t=document.getElementById("CaxChart").getContext("2d"),e=this.$Chart;this.Chart=new e(t,{type:"line",data:{labels:["1","2","3","4","5","6","7"],datasets:[{label:"7 ngày gần nhất",data:this.dataArr,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{title:{display:!0,text:"Số lượt tải về các phần quà trong 7 ngày gần nhất",fontSize:"18"}}})},computed:{dataArr:function(){var t;if(this.datasets){var e=this.datasets.dataCollection;t=e.length<7?e.length:7;var a=e.slice(e.length-t,e.length);return a}return[0,0,0,0,0,0,0]}}},L=D,P=(a("ae36"),Object(v["a"])(L,w,y,!1,null,null,null)),T=P.exports,E={props:["userId"],created:function(){this.initialize()},data:function(){return{userData:{},code:"",popupActive:!1,passChangePopup:!1,isActivating:!1,dataSet:""}},computed:{remainingDate:function(){if(this.userData){var t=new Date(this.userData.expirationDate).getTime()-o()();return t<0?0:Math.round(t/864e5)}return 0},average:function(){var t=this.dataSet.dataCollection;t[0]||(t=[0,0,0,0,0]);var e=t.reduce(function(t,e){return t+e});return(e/t.length).toFixed(2)},isNearExpire:function(){return this.remainingDate<=5},avatar:function(){return this.userData.avatarUrl?"".concat("http://104.248.159.101:4000","/")+this.userData.avatarUrl:"".concat("http://104.248.159.101:4000","/public/images/user.png")},transUserLevel:function(){var t,e=this.userData.userLevel;switch(e){case"free":t="Miễn phí";break;case"basic":t="Cơ bản";break;case"standard":t="Tiêu chuẩn";break;case"premium":t="Chuyên nghiệp";break;case"enterprise":t="Doanh nghiệp";break}return t},userLevelColor:function(){var t,e=this.userData.userLevel;switch(e){case"basic":t="background-image: linear-gradient( 180deg, #00fff6, #1797f9)";break;case"standard":t="background-image: linear-gradient( 180deg, #00e4ff, #6217f9)";break;case"premium":t="background-image: linear-gradient( 180deg, #4e00ff, #f917d6)";break;case"enterprise":t="background-image: linear-gradient( 180deg, #ffb400, #f91762)";break}return t}},filters:{dateFilter:function(t){if(t)return t.split("T")[0].split("-").reverse().join("-")},lengthFilter:function(t){if(t)return t.length},priceFilter:function(t){t=t.toString();for(var e=t.split("").reverse(""),a=[],n=0,i=0;i<e.length;i++)n<3?(n++,a.push(e[i])):(n=0,a.push("."),i--);return a.reverse().join("")}},methods:{activePopup:function(){this.popupActive=!0},initialize:function(){var t=this;fetch("".concat("http://104.248.159.101:4000","/userDash/").concat(this.userId),{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(t){return t.json()}).then(function(e){if("fail"===status)return t.firePopup("error","Phát hiện lỗi",e.msg);t.userData=e.user,t.dataSet=e.userData,t.$store.commit("createUserData",e.user)}).catch(function(t){throw t})},activateLicense:function(){var t=this;this.isActivating=!0,fetch("".concat("http://104.248.159.101:4000","/userDash/update-license"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.state.token},body:r()({key:this.code})}).then(function(t){return t.json()}).then(function(e){t.isActivating=!1,"fail"===e.status?t.firePopup("error","Lỗi kích hoạt",e.msg):(t.firePopup("success","Kích hoạt thành công",e.msg),t.initialize())}).catch(function(e){throw t.firePopup("info","Lỗi server",e),e})}},components:{passwordChange:g,pieChart:x,lineChart:T}},S=E,N=(a("5512"),Object(v["a"])(S,n,i,!1,null,null,null));e["default"]=N.exports},"214f":function(t,e,a){"use strict";a("b0c5");var n=a("2aba"),i=a("32e9"),s=a("79e5"),r=a("be13"),c=a("2b4c"),o=a("520a"),l=c("species"),u=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var d=c(t),h=!s(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),v=h?!s(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[l]=function(){return a}),a[d](""),!e}):void 0;if(!h||!v||"replace"===t&&!u||"split"===t&&!p){var f=/./[d],g=a(r,d,""[t],function(t,e,a,n,i){return e.exec===o?h&&!i?{done:!0,value:f.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),m=g[0],b=g[1];n(String.prototype,t,m),i(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"22f0":function(t,e,a){"use strict";var n=a("4b7f"),i=a.n(n);i.a},"28a5":function(t,e,a){"use strict";var n=a("aae3"),i=a("cb7c"),s=a("ebd6"),r=a("0390"),c=a("9def"),o=a("5f1b"),l=a("520a"),u=a("79e5"),p=Math.min,d=[].push,h="split",v="length",f="lastIndex",g=4294967295,m=!u(function(){RegExp(g,"y")});a("214f")("split",2,function(t,e,a,u){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[v]||2!="ab"[h](/(?:ab)*/)[v]||4!="."[h](/(.?)(.?)/)[v]||"."[h](/()()/)[v]>1||""[h](/.?/)[v]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(i,t,e);var s,r,c,o=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,h=void 0===e?g:e>>>0,m=new RegExp(t.source,u+"g");while(s=l.call(m,i)){if(r=m[f],r>p&&(o.push(i.slice(p,s.index)),s[v]>1&&s.index<i[v]&&d.apply(o,s.slice(1)),c=s[0][v],p=r,o[v]>=h))break;m[f]===s.index&&m[f]++}return p===i[v]?!c&&m.test("")||o.push(""):o.push(i.slice(p)),o[v]>h?o.slice(0,h):o}:"0"[h](void 0,0)[v]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i,n):b.call(String(i),a,n)},function(t,e){var n=u(b,t,this,e,b!==a);if(n.done)return n.value;var l=i(t),d=String(this),h=s(l,RegExp),v=l.unicode,f=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"y":"g"),_=new h(m?l:"^(?:"+l.source+")",f),C=void 0===e?g:e>>>0;if(0===C)return[];if(0===d.length)return null===o(_,d)?[d]:[];var k=0,x=0,w=[];while(x<d.length){_.lastIndex=m?x:0;var y,D=o(_,m?d:d.slice(x));if(null===D||(y=p(c(_.lastIndex+(m?0:x)),d.length))===k)x=r(d,x,v);else{if(w.push(d.slice(k,x)),w.length===C)return w;for(var L=1;L<=D.length-1;L++)if(w.push(D[L]),w.length===C)return w;x=k=y}}return w.push(d.slice(k)),w}]})},"318f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact"},[a("add-contact",{attrs:{popupActive:t.popupActive},on:{deactivePopup:function(e){t.popupActive=!1},addContact:function(e){return t.addContact(e)}}}),a("div",{staticClass:"contact__body"},[a("h4",{staticClass:"contact__title"},[t._v("Danh sách thông tin học viên")]),a("h6",[t._v("Có tổng cộng là: "+t._s(t.contactList.length)+" khách hàng")]),a("br"),a("button",{staticClass:"waves-effect indigo btn",on:{click:function(e){t.popupActive=!0}}},[t._v("\n            Thêm liên lạc\n        ")]),a("div",{staticClass:"contact__list"},[a("table",{staticClass:"centered responsive-table"},[t._m(0),a("tbody",t._l(t.contactList,function(e){return a("tr",{key:e._id,staticClass:"contact__badge",on:{click:function(a){return t.edit(e._id)}}},[a("td",[t._v(t._s(e.studentName))]),a("td",[t._v(t._s(e.studentEmail))]),a("td",{staticClass:"contact__date"},[t._v(t._s(t._f("dateFilter")(e.createdAt)))]),a("td",[t._v(t._s(e.phone?e.phone:"Không có"))]),a("td",[a("button",{staticClass:"btn btn-small waves-effect light-effects deep-orange",on:{click:function(a){return t.deleteContact(e._id)}}},[t._v("\n                                Xóa liên lạc\n                            ")])])])}),0)])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Tên")]),a("th",[t._v("Email ")]),a("th",[t._v("Ngày tạo")]),a("th",[t._v("SĐT")]),a("th",[t._v("Xóa")])])])}],s=a("f499"),r=a.n(s),c=(a("28a5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.popupActive?a("div",{staticClass:"up-popup addContact"},[a("float-down",[a("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.away,expression:"away"}],staticClass:"up-popup__body z-depth-3"},[a("h5",{staticClass:"up-popup__title light-blue-text text-darken-3"},[t._v("\n                    Thêm contact\n                ")]),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"name"}},[t._v("Tên liên lạc")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"validate",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"email"}},[t._v("Email liên lạc")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"validate",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),a("submit-btn",{attrs:{isLoading:t.isLoading,disableCon:!t.name||!t.email},on:{onSubmit:t.submit}},[t._v("\n                    Thêm liên lạc\n                ")]),a("i",{staticClass:"material-icons close-icon red-text",on:{click:t.away}},[t._v("clear")])],1)])],1):t._e()}),o=[],l=(a("7f7f"),a("c7db")),u={data:function(){return{isLoading:!1,name:"",email:""}},mixins:[l["mixin"]],props:["popupActive"],methods:{away:function(){this.$emit("deactivePopup")},submit:function(){var t=this;this.isLoading=!0,fetch("".concat("http://104.248.159.101:4000","/userDash/contact"),{method:"PUT",headers:{Authorization:"Bearer "+this.$store.state.token,"Content-Type":"application/json"},body:r()({name:this.name,email:this.email})}).then(function(t){return t.json()}).then(function(e){"success"===e.status&&(t.firePopup("success","Thêm thành công",e.msg),t.$emit("addContact",e.contact))}).catch(function(e){throw t.firePopup("error","Lỗi từ server",e.error.msg),e})}}},p=u,d=(a("7957"),a("2877")),h=Object(d["a"])(p,c,o,!1,null,null,null),v=h.exports,f={components:{addContact:v},data:function(){return{contactLists:"",popupActive:!1}},filters:{dateFilter:function(t){if(t)return t.split("T")[0].split("-").reverse().join("-")}},computed:{contactList:function(){return this.$store.state.userData.studentContacts}},methods:{deleteContact:function(t){var e=this;fetch("".concat("http://104.248.159.101:4000","/userDash/contact"),{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Bearer "+this.$store.state.token},body:r()({contactId:t})}).then(function(t){return t.json()}).then(function(a){"success"===a.status&&(e.firePopup("success","Xóa thành công",a.msg),e.$store.commit("deleteContact",t))}).catch(function(t){throw e.firePopup("error","Có lỗi server",t.err.msg),t})},addContact:function(t){this.$store.commit("addContact",t)},edit:function(t){alert(t)}}},g=f,m=(a("22f0"),Object(d["a"])(g,n,i,!1,null,null,null));e["default"]=m.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"386b":function(t,e,a){var n=a("5ca1"),i=a("79e5"),s=a("be13"),r=/"/g,c=function(t,e,a,n){var i=String(s(t)),c="<"+e;return""!==a&&(c+=" "+a+'="'+String(n).replace(r,"&quot;")+'"'),c+">"+i+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(c),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",a)}},"4b7f":function(t,e,a){},"520a":function(t,e,a){"use strict";var n=a("0bfb"),i=RegExp.prototype.exec,s=String.prototype.replace,r=i,c="lastIndex",o=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[c]||0!==e[c]}(),l=void 0!==/()??/.exec("")[1],u=o||l;u&&(r=function(t){var e,a,r,u,p=this;return l&&(a=new RegExp("^"+p.source+"$(?!\\s)",n.call(p))),o&&(e=p[c]),r=i.call(p,t),o&&r&&(p[c]=p.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)}),r}),t.exports=r},5310:function(t,e,a){"use strict";var n=a("b168"),i=a.n(n);i.a},5512:function(t,e,a){"use strict";var n=a("0ef1"),i=a.n(n);i.a},"57b2":function(t,e,a){},"5f1b":function(t,e,a){"use strict";var n=a("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var s=a.call(t,e);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),s=a("9e1e"),r="toString",c=/./[r],o=function(t){a("2aba")(RegExp.prototype,r,t,!0)};a("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?o(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)}):c.name!=r&&o(function(){return c.call(this)})},7957:function(t,e,a){"use strict";var n=a("e5e8"),i=a.n(n);i.a},aae3:function(t,e,a){var n=a("d3f4"),i=a("2d95"),s=a("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},ae36:function(t,e,a){"use strict";var n=a("57b2"),i=a.n(n);i.a},b0c5:function(t,e,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b168:function(t,e,a){},b54a:function(t,e,a){"use strict";a("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},c1de:function(t,e,a){},c2f3:function(t,e,a){},d66d:function(t,e,a){"use strict";var n=a("c2f3"),i=a.n(n);i.a},e5e8:function(t,e,a){},f673:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("grid-layout",{staticClass:"adjust"},[a("div",{staticClass:"email-editor"},[a("form",{staticClass:"email-editor__body z-depth-3",attrs:{action:"#"}},[a("h5",{staticClass:"blue-text text-darken-2"},[t._v("Chỉnh sửa trang quà tặng")]),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("i",{staticClass:"material-icons prefix"},[t._v("text_rotation_none")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"validate",attrs:{type:"text",name:"name",placeholder:"Tiêu đề trang"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("slider-picker",{staticClass:"col s12",model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),a("p",{staticClass:"email-editor__color"},[t._v("  "+t._s(t.color.hex))])],1),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("i",{staticClass:"material-icons prefix"},[t._v("subject")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"materialize-textarea",attrs:{name:"desc",placeholder:"Miêu tả quà tặng","data-length":"120"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"file-field input-field"},[a("div",{staticClass:"btn btn-small "},[a("span",[t._v("Upload ảnh")]),a("input",{ref:"img",attrs:{type:"file",accept:"image/*"}})]),a("div",{staticClass:"file-path-wrapper"},[a("input",{staticClass:"file-path validate",attrs:{type:"text"},on:{change:t.uploadImg}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("i",{staticClass:"material-icons prefix"},[t._v("cloud_download")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],attrs:{type:"text",placeholder:"Link download quà tặng"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}})])]),a("div",{staticClass:"row"},[a("button",{staticClass:"btn btn-small waves-effect light-effect amber grey-text text-darken-4",on:{click:function(e){return e.preventDefault(),t.generatorToken(e)}}},[a("i",{staticClass:"material-icons left"},[t._v("code")]),t._v("\n                    Token generator\n                ")]),a("p",{staticClass:"email-editor__token"},[t._v(t._s(t.token))])]),a("submit-btn",{attrs:{isLoading:t.isLoading,disableCon:!t.name||!t.desc||!t.link},on:{onSubmit:t.submit}},[t._v("\n                Submit\n             ")])],1)]),a("div",{staticClass:"edit-prev"},[a("router-link",{staticClass:"btn red darken-2",attrs:{tag:"button",to:"/gift/"+t.userId}},[t._v("\n            Preview\n        ")]),a("br"),a("div",{staticClass:"edit-prev__body z-depth-2"},[a("div",{staticClass:"edit-prev__name",style:{"background-color":t.prevColor}},[a("h5",[t._v(t._s(t.prevName))])]),a("img",{staticClass:"edit-prev__img",attrs:{src:t.prevImg,alt:"cax"}}),a("div",{staticClass:"edit-prev__info"},[a("p",{staticClass:"edit-prev__desc"},[t._v("\n                    "+t._s(t.prevDesc)+"\n                ")]),a("div",{staticClass:"edit-prev__unlock",style:t.unlockBg},[a("h6",{style:{color:t.color.hex}},[t._v("Để nhận được tài liệu, bạn vui lòng điền đầy đủ thông tin bên dưới")]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"token"}},[t._v("Mã nhận quà")]),a("input",{attrs:{type:"text",name:"token"},domProps:{value:t.token}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("label",{attrs:{for:"name"}},[t._v("Nhập vào email của bạn")]),a("input",{attrs:{type:"email",name:"email"}})])]),a("div",{staticClass:"edit-prev__lock"},[a("button",{staticClass:"btn waves-effect light-effect",style:{backgroundColor:t.prevColor}},[a("i",{staticClass:"material-icons left"},[t._v("lock_open")]),t._v("\n                            Mở khóa link\n                        ")])])])])])],1)])},i=[],s=a("f499"),r=a.n(s),c=(a("b54a"),a("6b54"),a("7f7f"),{created:function(){this.userDataGift&&(this.name=this.userDataGift.name,this.desc=this.userDataGift.desc,this.imgUrl=this.userDataGift.imgUrl||"",this.link=this.userDataGift.downloadLink,this.token=this.userDataGift.token,this.color=JSON.parse(this.userDataGift.color))},data:function(){return{isLoading:!1,name:"",desc:"",link:"",token:"",imageTempUrl:"",imageFile:null,color:"",imgUrl:""}},methods:{uploadImg:function(){var t=this.$refs.img.files[0];this.imageTempUrl=URL.createObjectURL(t),this.imageFile=t},generatorToken:function(){var t=Math.random()+1,e=t.toString(36).substr(2,9).toUpperCase();this.token=e},submit:function(){var t=this,e=new FormData;e.append("giftImg",this.imageFile),e.append("name",this.name),e.append("desc",this.desc),e.append("token",this.token),e.append("downloadLink",this.link),e.append("color",r()(this.color)),this.isLoading=!0,fetch("".concat("http://104.248.159.101:4000","/userDash/gift"),{method:"PUT",headers:{Authorization:"Bearer "+this.$store.state.token},body:e}).then(function(t){return t.json()}).then(function(e){t.isLoading=!1,"fail"===e.status?t.firePopup("error","Xuất hiện lỗi",e.msg):"success"===e.status&&(t.firePopup("success","Cập nhật thành công",e.msg),t.$store.commit("createUserData",e.userGift))}).catch(function(e){throw t.isLoading=!1,e})}},computed:{userDataGift:function(){return this.$store.state.userData.gift||void 0},prevName:function(){return this.name||"Tiêu đề cho trang quà tặng"},prevDesc:function(){return this.desc||"Miêu tả cho trang quà tặng"},prevImg:function(){return""===this.imageTempUrl&&""===this.imgUrl?"".concat("http://104.248.159.101:4000","/public/images/gift.jpg"):""===this.imageTempUrl&&""!==this.imgUrl?this.imgUrl:(""!==this.imageTempUrl&&this.imgUrl,this.imageTempUrl)},prevColor:function(){return this.color.hex||""},unlockBg:function(){var t=this.color.rgba||"";return"backgroundColor : rgba(".concat(t.r,", ").concat(t.g,",").concat(t.b,", .15 )")},userId:function(){return this.$store.state.userId}}}),o=c,l=(a("f71c"),a("2877")),u=Object(l["a"])(o,n,i,!1,null,null,null);e["default"]=u.exports},f71c:function(t,e,a){"use strict";var n=a("c1de"),i=a.n(n);i.a}}]);
//# sourceMappingURL=user-group.9446b0d0.js.map